---
// src/pages/noticias/[id].astro
import Layout from '../../layouts/Layout.astro';
import type { News } from '../../types/news';

export async function getStaticPaths() {
  // En un caso real, obtendrías todos los IDs de noticias disponibles
  const response = await fetch('https://api.example.com/news');
  const { data } = await response.json();
  
  return data.map((news: News) => ({
    params: { id: news.id.toString() },
    props: { news },
  }));
}

const { news } = Astro.props;
const { title, content, image_url, author, published_date } = news;

const formatDate = (dateString: string) => {
  return new Date(dateString).toLocaleDateString('es-ES', {
    year: 'numeric',
    month: 'long',
    day: 'numeric'
  });
};
---

<Layout title={`FUC - ${title}`}>
  <div class="max-w-4xl mx-auto px-4 py-12">
    <a 
      href="/noticias" 
      class="inline-flex items-center text-red-600 hover:text-red-700 mb-8"
    >
      ← Volver a Noticias
    </a>

    <article>
      <h1 class="text-4xl font-bold mb-6">{title}</h1>
      
      <div class="flex items-center gap-4 text-gray-600 mb-8">
        <span>{author}</span>
        <span>•</span>
        <span>{formatDate(published_date)}</span>
      </div>

      <img 
        src={image_url} 
        alt={title}
        class="w-full h-[400px] object-cover rounded-lg mb-8"
      />

      <div class="prose prose-lg max-w-none">
        {content}
      </div>
    </article>
  </div>
</Layout>